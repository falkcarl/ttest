{"title":"t-test practice and simulator","markdown":{"yaml":{"title":"t-test practice and simulator","author":"Carl F. Falk","date":"2024-09-09","format":{"html":{"grid":{"body-width":"1400px"}}},"filters":["shinylive"]},"headingText":"Copyright 2024 Carl F. Falk","containsRefs":false,"markdown":"\n\n<!-- At terminal need to do quarto add quarto-ext/shinylive -->\n\n<!-- might need to render twice or so, needs to download stuff-->\n\n<!--https://quarto.thecoatlessprofessor.com/r-shinylive-demo/-->\n\n<!--https://github.com/coatless-quarto/r-shinylive-demo-->\n\n<!-- to publish is a bit tricky, try quarto-pub?-->\n\n<!-- quarto publish quarto-pub (file size too big) -->\n\n<!-- for testing before deployment -->\n\n<!--https://github.com/RamiKrispin/shinylive-r-->\n\n```{shinylive-r}\n#| standalone: true\n#| viewerHeight: 1000\n\n######################################################################\n##\n## This program is free software: you can redistribute it and/or\n## modify it under the terms of the GNU General Public License as\n## published by the Free Software Foundation, either version 3 of\n## the License, or (at your option) any later version.\n##\n## This program is distributed in the hope that it will be useful,\n## but WITHOUT ANY WARRANTY; without even the implied warranty of\n## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n## GNU General Public License for more details.\n## <http://www.gnu.org/licenses/>\n\nlibrary(shiny)\nlibrary(xtable)\n#library(knitr)\n#library(kableExtra)\nlibrary(effectsize)\n#library(report) # auto-generates APA-style report...\n#library(shinyjs) # not used\n#library(ggplot2) # not used\n\n# Define server logic\nserver <- function(input, output, session) {\n  \n  # create dataset and descriptives\n  dat <- eventReactive({input$newdat},{\n    Y1 <- round(rnorm(input$pop1n, input$pop1mean, input$pop1sd),2)\n    Y2 <- round(rnorm(input$pop2n, input$pop2mean, input$pop2sd),2)\n    Y <- c(Y1,Y2)\n    X <- c(rep(\"Group 1\", input$pop1n),rep(\"Group 2\", input$pop2n))\n    data <- data.frame(X=X,Y=Y)\n    out <- list(data = data,\n                Gnames = c(\"Group 1\",\"Group 2\"),\n                N1 = input$pop1n,\n                N2 = input$pop2n,\n                M1 = mean(Y1),\n                M2 = mean(Y2),\n                Med1 = median(Y1),\n                Med2 = median(Y2),\n                SD1 = sd(Y1),\n                SD2 = sd(Y2),\n                Var1 = var(Y1),\n                Var2 = var(Y2)\n            )\n    out\n  })\n  \n  # display of raw data\n  output$rawData <- renderDataTable({\n    data <- dat()\n    data$data}\n  )\n  \n  # display of descriptive statistics\n  output$desc <- function(){\n    d <- dat()\n\n    #kableExtra::kable_styling(\n    #knitr::kable(data.frame(Group = d$Gnames,\n    #                 N = c(d$N1,d$N2),\n    #                 M = c(d$M1,d$M2),\n    #                 #Median = c(d$Med1, d$Med2),\n    #                 SD = c(d$SD1,d$SD2),\n    #                 Var = c(d$Var1, d$Var2)),\n    #      \"html\",\n    #      digits = 3),\n    #\"striped\", full_width=T)\n    print(xtable(data.frame(Group = d$Gnames,\n                     N = c(d$N1,d$N2),\n                     M = c(d$M1,d$M2),\n                     #Median = c(d$Med1, d$Med2),\n                     SD = c(d$SD1,d$SD2),\n                     Var = c(d$Var1, d$Var2)),\n           digits = 3),type=\"html\",\n          include.rownames=FALSE,\n          booktabs=TRUE)\n    \n  }\n  \n    # display results of t-test\n  output$results <- renderPrint({\n    data <- dat()\n    alpha <- as.numeric(input$alpha)\n    \n    # df and critical t-value\n    df <- nrow(data$data) - 2\n    t.crit <- abs(qt(alpha/2, df=df))\n    \n    test <- t.test(Y ~ X, data=data$data, var.equal=TRUE, conf.level=1-alpha)\n    \n    reject <- test$p.value < alpha\n    #out <- report(t.test(Y ~ X, data = data$data, var.equal=TRUE))\n    \n    D <- unname(test$estimate[1]-test$estimate[2])\n    pooledvar <- (data$Var1*(data$N1-1)+data$Var2*(data$N2-1))/df\n    cohend <- D/sqrt(pooledvar)\n    dsize <- unname(interpret_cohens_d(cohend, rules=\"cohen1988\"))\n    \n    out <- \"\"\n    out <- paste0(out, \"alpha (two-tailed): \", input$alpha, \"\\n\")\n    out <- paste0(out, \"degrees of freedom (df) = \", df,\"\\n\")\n    out <- paste0(out, \"critical t = \", round(t.crit, digits=4), \"\\n\")    \n    out <- paste0(out, \"difference (D; Group 1 - Group 2) = \", round(D, 4), \"\\n\")\n    out <- paste0(out, \"estimated standard error = \", round(test$stderr,4), \"\\n\")    \n    out <- paste0(out, \"obtained t = \", round(test$statistic, digits=4), \"\\n\")\n    out <- paste0(out, \"reject H0? \", ifelse(reject, \"Yes\", \"No\"), \"\\n\")\n    \n    out <- paste0(out, \"\\n\\n\")\n    out <- paste0(out, \"Basic APA-style report\\n\\n\")\n    \n    group1diff <- ifelse(D > 0, \"higher\", \"lower\")\n    group1 <- paste0(\"Group 1 (M = \", round(data$M1,2), \", SD = \", round(data$SD1,2), \")\" )\n    group2 <- paste0(\"Group 2 (M = \", round(data$M2,2), \", SD = \", round(data$SD2,2), \")\" )\n    stats <- paste0(\"t(\",df, \") = \", round(test$statistic, 2), \", p < \", alpha,\n                    \", \", (1-alpha)*100, \"% CI[\",round(test$conf.int[1],2),\",\",round(test$conf.int[2],2),\"]\")\n    \n    if(reject){\n      out <- paste0(out, group1, \" had significantly \", group1diff, \" scores in\ncomparison to \", group2, \", \", stats, \",\nwith a \", dsize, \" effect size, Cohen's d = \", round(cohend,2), \".\")\n    } else {\n      out <- paste0(out, \"Although \", group1, \" tended to have \", group1diff, \" scores\nin comparison to \", group2, \", this difference was\nnot significant, \", stats, \",\nand had a \", dsize, \" effect size, Cohen's d = \", round(cohend,2), \".\")\n    }\n    cat(out)\n  })\n  \n  \n}\n\nui <- fluidPage(\n\n    # Application title\n    #titlePanel(\"\"),\n\n    # Layout of UI\n    sidebarLayout(\n      sidebarPanel(strong(\"Population 1\"),\n                   sliderInput(\"pop1n\",\n                       \"Sample size (N):\",\n                       min = 3, max=15,\n                       value = 5, step=1),\n                   numericInput(\"pop1mean\",\n                       \"Mean:\",\n                       value = 5,\n                       step = .5),\n                   numericInput(\"pop1sd\",\n                       \"Standard Deviation:\",\n                       value = 1,\n                       step = .1,\n                       min = .1),\n                   br(),\n                   br(),\n                   strong(\"Population 2\"),\n                   sliderInput(\"pop2n\",\n                       \"Sample size (N):\",\n                       min = 3, max=15,\n                       value = 5, step=1),                   \n                   numericInput(\"pop2mean\",\n                       \"Mean:\",\n                       value = 5,\n                       step = .5),\n                   numericInput(\"pop2sd\",\n                       \"Standard Deviation:\",\n                       value = 1,\n                       step = .1,\n                       min = .1),\n                   actionButton(\"newdat\",\n                        \"Generate New Dataset\"),\n                   br(),\n                   br(),\n                   strong(\"Analysis options\"),\n                   selectInput(\"alpha\",\n                               label = \"alpha (two-tailed):\",\n                               choices = c(.05,.005,.01,.02, .1, .2, .3, .4, .5)\n                   )\n      ),\n      # Main Panel\n      mainPanel(\n          tabsetPanel(\n            tabPanel(\"Raw Data\",\n                     dataTableOutput(\"rawData\")\n            ),\n            tabPanel(\"Descriptive Stats\",\n                     tableOutput(\"desc\")\n            ),\n            tabPanel(\"Results\",\n                     verbatimTextOutput(\"results\")                     \n            )#,\n            #tabPanel(\"Visualization\"\n            #)\n          )\n      )\n    ) # end sidebarLayout\n)\n\nshinyApp(ui = ui, server = server)\n\n\n```\n","srcMarkdownNoYaml":"\n\n<!-- At terminal need to do quarto add quarto-ext/shinylive -->\n\n<!-- might need to render twice or so, needs to download stuff-->\n\n<!--https://quarto.thecoatlessprofessor.com/r-shinylive-demo/-->\n\n<!--https://github.com/coatless-quarto/r-shinylive-demo-->\n\n<!-- to publish is a bit tricky, try quarto-pub?-->\n\n<!-- quarto publish quarto-pub (file size too big) -->\n\n<!-- for testing before deployment -->\n\n<!--https://github.com/RamiKrispin/shinylive-r-->\n\n```{shinylive-r}\n#| standalone: true\n#| viewerHeight: 1000\n\n######################################################################\n## Copyright 2024 Carl F. Falk\n##\n## This program is free software: you can redistribute it and/or\n## modify it under the terms of the GNU General Public License as\n## published by the Free Software Foundation, either version 3 of\n## the License, or (at your option) any later version.\n##\n## This program is distributed in the hope that it will be useful,\n## but WITHOUT ANY WARRANTY; without even the implied warranty of\n## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n## GNU General Public License for more details.\n## <http://www.gnu.org/licenses/>\n\nlibrary(shiny)\nlibrary(xtable)\n#library(knitr)\n#library(kableExtra)\nlibrary(effectsize)\n#library(report) # auto-generates APA-style report...\n#library(shinyjs) # not used\n#library(ggplot2) # not used\n\n# Define server logic\nserver <- function(input, output, session) {\n  \n  # create dataset and descriptives\n  dat <- eventReactive({input$newdat},{\n    Y1 <- round(rnorm(input$pop1n, input$pop1mean, input$pop1sd),2)\n    Y2 <- round(rnorm(input$pop2n, input$pop2mean, input$pop2sd),2)\n    Y <- c(Y1,Y2)\n    X <- c(rep(\"Group 1\", input$pop1n),rep(\"Group 2\", input$pop2n))\n    data <- data.frame(X=X,Y=Y)\n    out <- list(data = data,\n                Gnames = c(\"Group 1\",\"Group 2\"),\n                N1 = input$pop1n,\n                N2 = input$pop2n,\n                M1 = mean(Y1),\n                M2 = mean(Y2),\n                Med1 = median(Y1),\n                Med2 = median(Y2),\n                SD1 = sd(Y1),\n                SD2 = sd(Y2),\n                Var1 = var(Y1),\n                Var2 = var(Y2)\n            )\n    out\n  })\n  \n  # display of raw data\n  output$rawData <- renderDataTable({\n    data <- dat()\n    data$data}\n  )\n  \n  # display of descriptive statistics\n  output$desc <- function(){\n    d <- dat()\n\n    #kableExtra::kable_styling(\n    #knitr::kable(data.frame(Group = d$Gnames,\n    #                 N = c(d$N1,d$N2),\n    #                 M = c(d$M1,d$M2),\n    #                 #Median = c(d$Med1, d$Med2),\n    #                 SD = c(d$SD1,d$SD2),\n    #                 Var = c(d$Var1, d$Var2)),\n    #      \"html\",\n    #      digits = 3),\n    #\"striped\", full_width=T)\n    print(xtable(data.frame(Group = d$Gnames,\n                     N = c(d$N1,d$N2),\n                     M = c(d$M1,d$M2),\n                     #Median = c(d$Med1, d$Med2),\n                     SD = c(d$SD1,d$SD2),\n                     Var = c(d$Var1, d$Var2)),\n           digits = 3),type=\"html\",\n          include.rownames=FALSE,\n          booktabs=TRUE)\n    \n  }\n  \n    # display results of t-test\n  output$results <- renderPrint({\n    data <- dat()\n    alpha <- as.numeric(input$alpha)\n    \n    # df and critical t-value\n    df <- nrow(data$data) - 2\n    t.crit <- abs(qt(alpha/2, df=df))\n    \n    test <- t.test(Y ~ X, data=data$data, var.equal=TRUE, conf.level=1-alpha)\n    \n    reject <- test$p.value < alpha\n    #out <- report(t.test(Y ~ X, data = data$data, var.equal=TRUE))\n    \n    D <- unname(test$estimate[1]-test$estimate[2])\n    pooledvar <- (data$Var1*(data$N1-1)+data$Var2*(data$N2-1))/df\n    cohend <- D/sqrt(pooledvar)\n    dsize <- unname(interpret_cohens_d(cohend, rules=\"cohen1988\"))\n    \n    out <- \"\"\n    out <- paste0(out, \"alpha (two-tailed): \", input$alpha, \"\\n\")\n    out <- paste0(out, \"degrees of freedom (df) = \", df,\"\\n\")\n    out <- paste0(out, \"critical t = \", round(t.crit, digits=4), \"\\n\")    \n    out <- paste0(out, \"difference (D; Group 1 - Group 2) = \", round(D, 4), \"\\n\")\n    out <- paste0(out, \"estimated standard error = \", round(test$stderr,4), \"\\n\")    \n    out <- paste0(out, \"obtained t = \", round(test$statistic, digits=4), \"\\n\")\n    out <- paste0(out, \"reject H0? \", ifelse(reject, \"Yes\", \"No\"), \"\\n\")\n    \n    out <- paste0(out, \"\\n\\n\")\n    out <- paste0(out, \"Basic APA-style report\\n\\n\")\n    \n    group1diff <- ifelse(D > 0, \"higher\", \"lower\")\n    group1 <- paste0(\"Group 1 (M = \", round(data$M1,2), \", SD = \", round(data$SD1,2), \")\" )\n    group2 <- paste0(\"Group 2 (M = \", round(data$M2,2), \", SD = \", round(data$SD2,2), \")\" )\n    stats <- paste0(\"t(\",df, \") = \", round(test$statistic, 2), \", p < \", alpha,\n                    \", \", (1-alpha)*100, \"% CI[\",round(test$conf.int[1],2),\",\",round(test$conf.int[2],2),\"]\")\n    \n    if(reject){\n      out <- paste0(out, group1, \" had significantly \", group1diff, \" scores in\ncomparison to \", group2, \", \", stats, \",\nwith a \", dsize, \" effect size, Cohen's d = \", round(cohend,2), \".\")\n    } else {\n      out <- paste0(out, \"Although \", group1, \" tended to have \", group1diff, \" scores\nin comparison to \", group2, \", this difference was\nnot significant, \", stats, \",\nand had a \", dsize, \" effect size, Cohen's d = \", round(cohend,2), \".\")\n    }\n    cat(out)\n  })\n  \n  \n}\n\nui <- fluidPage(\n\n    # Application title\n    #titlePanel(\"\"),\n\n    # Layout of UI\n    sidebarLayout(\n      sidebarPanel(strong(\"Population 1\"),\n                   sliderInput(\"pop1n\",\n                       \"Sample size (N):\",\n                       min = 3, max=15,\n                       value = 5, step=1),\n                   numericInput(\"pop1mean\",\n                       \"Mean:\",\n                       value = 5,\n                       step = .5),\n                   numericInput(\"pop1sd\",\n                       \"Standard Deviation:\",\n                       value = 1,\n                       step = .1,\n                       min = .1),\n                   br(),\n                   br(),\n                   strong(\"Population 2\"),\n                   sliderInput(\"pop2n\",\n                       \"Sample size (N):\",\n                       min = 3, max=15,\n                       value = 5, step=1),                   \n                   numericInput(\"pop2mean\",\n                       \"Mean:\",\n                       value = 5,\n                       step = .5),\n                   numericInput(\"pop2sd\",\n                       \"Standard Deviation:\",\n                       value = 1,\n                       step = .1,\n                       min = .1),\n                   actionButton(\"newdat\",\n                        \"Generate New Dataset\"),\n                   br(),\n                   br(),\n                   strong(\"Analysis options\"),\n                   selectInput(\"alpha\",\n                               label = \"alpha (two-tailed):\",\n                               choices = c(.05,.005,.01,.02, .1, .2, .3, .4, .5)\n                   )\n      ),\n      # Main Panel\n      mainPanel(\n          tabsetPanel(\n            tabPanel(\"Raw Data\",\n                     dataTableOutput(\"rawData\")\n            ),\n            tabPanel(\"Descriptive Stats\",\n                     tableOutput(\"desc\")\n            ),\n            tabPanel(\"Results\",\n                     verbatimTextOutput(\"results\")                     \n            )#,\n            #tabPanel(\"Visualization\"\n            #)\n          )\n      )\n    ) # end sidebarLayout\n)\n\nshinyApp(ui = ui, server = server)\n\n\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","filters":["shinylive"],"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.555","grid":{"body-width":"1400px","sidebar-width":"200px","margin-width":"200px"},"title":"t-test practice and simulator","author":"Carl F. Falk","date":"2024-09-09"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}